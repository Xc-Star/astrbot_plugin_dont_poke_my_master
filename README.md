# 不许戳主人

一个有趣的 AstrBot 插件，当有人戳一戳主人或机器人本身时会自动回复并反戳。

## 功能特性

- 自动检测 QQ 群中的戳一戳事件（通过 aiocqhttp 平台）
- 当有人戳主人时，随机回复消息并反戳
- 当有人戳机器人时，随机回复消息并反戳
- 可自定义回复模板和触发概率

## 安装方法

1. 将插件克隆或下载到 AstrBot 的插件目录：
   ```bash
   cd data/plugins
   git clone https://github.com/Xc-Star/astrbot_plugin_dont_poke_my_master
   ```

2. 重启 AstrBot 或通过控制台重载插件

## 配置说明

可以通过 AstrBot 控制台或直接编辑配置文件来配置插件。

### 配置项

- **name** (字符串): 机器人对自己的称呼（例如："我"、"喵喵"）
  - 默认值: `"我"`

- **master_list** (列表): 需要保护的主人用户 ID 列表
  - 默认值: `["254182219"]`
  - 示例: `["123456789", "987654321"]`

- **trigger_probability** (字符串): 主人被戳时的触发概率
  - 范围: `"0"` 到 `"1"` (0% 到 100%)
  - 默认值: `"1"` (100%)

- **message_template** (列表): 主人被戳时的回复模板
  - 使用 `|` 分隔多条消息（每条消息会单独发送并反戳）
  - 默认包含多个预配置模板

- **re_poke_probability** (字符串): 机器人被戳时的回复概率
  - 范围: `"0"` 到 `"1"` (0% 到 100%)
  - 默认值: `"1"` (100%)

- **re_poke_template** (列表): 机器人被戳时的回复模板
  - 使用 `{name}` 占位符来插入机器人的自称
  - 默认包含 200+ 条有趣的预配置回复

### 配置示例

```json
{
    "name": "喵喵",
    "master_list": ["123456789"],
    "trigger_probability": "0.8",
    "message_template": [
        "不许戳主人！|让你戳！",
        "说了不要戳！"
    ],
    "re_poke_probability": "1",
    "re_poke_template": [
        "不要再戳了好不好嘛~",
        "{name}诅咒你买肯德基不是星期四~"
    ]
}
```

## 工作原理

1. **保护主人**: 当有人戳主人列表中的用户时：
   - 机器人随机选择一个回复模板
   - 发送每条消息（由 `|` 分隔）
   - 每条消息后反戳对方 1 次

2. **自我防御**: 当有人戳机器人时：
   - 机器人从反戳模板中随机选择一条回复
   - 将 `{name}` 替换为配置的机器人自称
   - 发送回复并反戳对方 1 次

3. **安全机制**: 机器人会忽略自己发起的戳一戳事件，防止无限循环

## 平台支持

本插件目前仅支持 **aiocqhttp** 平台（通过 go-cqhttp/NapCat 接入的 QQ 群）。

## 依赖要求

- AstrBot >= v4.5.0
- 已配置并运行 aiocqhttp 平台

## 作者

- **Xc_Star**
- 仓库地址: https://github.com/Xc-Star/astrbot_plugin_dont_poke_my_master

## 贡献

欢迎提交 Issue 和 Pull Request！
